var WagtailHeraldSchema=function(e){"use strict";var t=Object.defineProperty,i=(e,i,o)=>((e,i,o)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o)(e,"symbol"!=typeof i?i+"":i,o);const o={WebSite:{type:"WebSite",label:"WebSite",labelJa:"ウェブサイト",category:"site-wide",defaultOn:!0,helpText:"Site information. Auto-populated from Site settings.",helpTextJa:"サイト情報。サイト設定から自動入力されます。",autoFields:[{schemaProperty:"name",source:"site.site_name",description:"Site name"},{schemaProperty:"url",source:"site.root_url",description:"Site URL"}],requiredFields:[],optionalFields:[{name:"potentialAction",type:"object",description:"SearchAction for sitelinks search box"}],placeholder:{},example:{potentialAction:{"@type":"SearchAction",target:"https://example.com/search?q={search_term_string}"}},googleDocsUrl:"https://schema.org/WebSite"},Organization:{type:"Organization",label:"Organization",labelJa:"組織",category:"site-wide",defaultOn:!0,helpText:"Organization info. Auto-populated from SEO Settings.",helpTextJa:"組織情報。SEO設定から自動入力されます。",autoFields:[{schemaProperty:"name",source:"settings.organization_name",description:"Org name"},{schemaProperty:"url",source:"site.root_url",description:"Website URL"},{schemaProperty:"logo",source:"settings.organization_logo",description:"Logo image"},{schemaProperty:"sameAs",source:"settings.social_profiles",description:"Social links"}],requiredFields:[],optionalFields:[],placeholder:{},example:{},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/organization"},BreadcrumbList:{type:"BreadcrumbList",label:"BreadcrumbList",labelJa:"パンくずリスト",category:"site-wide",defaultOn:!0,helpText:"Breadcrumb navigation. Fully auto-generated from page hierarchy.",helpTextJa:"パンくずナビ。ページ階層から完全自動生成されます。",autoFields:[{schemaProperty:"itemListElement",source:"page.get_ancestors()",description:"Breadcrumb items"}],requiredFields:[],optionalFields:[],placeholder:{},example:{},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/breadcrumb"},WebPage:{type:"WebPage",label:"Web Page",labelJa:"ウェブページ",category:"content",helpText:"Generic web page. All properties auto-generated.",helpTextJa:"一般的なウェブページ。すべてのプロパティは自動生成されます。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Page title"},{schemaProperty:"description",source:"page.search_description",description:"Meta description"},{schemaProperty:"url",source:"page.full_url",description:"Page URL"}],requiredFields:[],optionalFields:[],placeholder:{},example:{},googleDocsUrl:"https://schema.org/WebPage"},Article:{type:"Article",label:"Article",labelJa:"記事",category:"content",helpText:"General article. Use NewsArticle for news, BlogPosting for blogs.",helpTextJa:"一般的な記事。ニュースにはNewsArticle、ブログにはBlogPostingを使用。",autoFields:[{schemaProperty:"headline",source:"page.seo_title || page.title",description:"Article headline"},{schemaProperty:"author",source:"page.owner",description:"Author (Person)"},{schemaProperty:"datePublished",source:"page.first_published_at",description:"Publish date"},{schemaProperty:"dateModified",source:"page.last_published_at",description:"Last modified"},{schemaProperty:"image",source:"page.og_image",description:"Featured image"},{schemaProperty:"publisher",source:"settings.organization",description:"Publisher org"}],requiredFields:[],optionalFields:[{name:"articleSection",type:"string",description:"Article section/category"},{name:"wordCount",type:"number",description:"Word count"}],placeholder:{},example:{articleSection:"Technology",wordCount:1500},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/article"},NewsArticle:{type:"NewsArticle",label:"News Article",labelJa:"ニュース記事",category:"content",helpText:"News article. Enables Google News features.",helpTextJa:"ニュース記事。Googleニュース機能が有効になります。",autoFields:[{schemaProperty:"headline",source:"page.seo_title || page.title",description:"Article headline"},{schemaProperty:"author",source:"page.owner",description:"Author (Person)"},{schemaProperty:"datePublished",source:"page.first_published_at",description:"Publish date"},{schemaProperty:"dateModified",source:"page.last_published_at",description:"Last modified"},{schemaProperty:"image",source:"page.og_image",description:"Featured image"},{schemaProperty:"publisher",source:"settings.organization",description:"Publisher org"}],requiredFields:[],optionalFields:[{name:"dateline",type:"string",description:"News dateline location"}],placeholder:{},example:{dateline:"TOKYO"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/article"},BlogPosting:{type:"BlogPosting",label:"Blog Post",labelJa:"ブログ記事",category:"content",helpText:"Blog post. Similar to Article but for blog content.",helpTextJa:"ブログ投稿。Articleと同様ですがブログコンテンツ向け。",autoFields:[{schemaProperty:"headline",source:"page.seo_title || page.title",description:"Post headline"},{schemaProperty:"author",source:"page.owner",description:"Author (Person)"},{schemaProperty:"datePublished",source:"page.first_published_at",description:"Publish date"},{schemaProperty:"dateModified",source:"page.last_published_at",description:"Last modified"},{schemaProperty:"image",source:"page.og_image",description:"Featured image"},{schemaProperty:"publisher",source:"settings.organization",description:"Publisher org"}],requiredFields:[],optionalFields:[{name:"articleSection",type:"string",description:"Blog category"},{name:"keywords",type:"string",description:"Comma-separated keywords"}],placeholder:{},example:{articleSection:"Tech Blog",keywords:"wagtail, cms, python"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/article"},Product:{type:"Product",label:"Product",labelJa:"商品",category:"business",helpText:"Product with price/availability. Enables rich results.",helpTextJa:"価格・在庫情報付き商品ページ。リッチリザルト対応。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Product name"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"image",source:"page.og_image",description:"Product image"}],requiredFields:[],optionalFields:[{name:"offers",type:"object",description:"Price and availability"},{name:"brand",type:"string",description:"Brand name"},{name:"sku",type:"string",description:"Product SKU"},{name:"gtin",type:"string",description:"Global Trade Item Number"}],placeholder:{offers:{"@type":"Offer",price:"",priceCurrency:"JPY",availability:"https://schema.org/InStock"}},example:{offers:{"@type":"Offer",price:"1999",priceCurrency:"JPY"},brand:"Example Brand",sku:"PROD-001"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/product"},LocalBusiness:{type:"LocalBusiness",label:"Local Business",labelJa:"ローカルビジネス",category:"business",helpText:"Local business with address and hours. Great for local SEO.",helpTextJa:"住所・営業時間付きローカルビジネス。ローカルSEOに効果的。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Business name"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"image",source:"page.og_image",description:"Business image"}],requiredFields:[{name:"address",type:"object",description:"PostalAddress object"}],optionalFields:[{name:"telephone",type:"string",description:"Phone number"},{name:"openingHoursSpecification",type:"array",description:"Business hours"},{name:"priceRange",type:"string",description:"Price range (e.g., $$)"},{name:"geo",type:"object",description:"GeoCoordinates"}],placeholder:{address:{"@type":"PostalAddress",streetAddress:"",addressLocality:"",addressRegion:"",postalCode:"",addressCountry:"JP"}},example:{address:{"@type":"PostalAddress",streetAddress:"1-1-1 Shibuya",addressLocality:"Shibuya-ku",addressRegion:"Tokyo",postalCode:"150-0002",addressCountry:"JP"},telephone:"+81-3-1234-5678",priceRange:"$$"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/local-business"},Service:{type:"Service",label:"Service",labelJa:"サービス",category:"business",helpText:"Service offering. Describe what services you provide.",helpTextJa:"サービス提供。提供サービスの説明に使用。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Service name"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"provider",source:"settings.organization",description:"Provider"}],requiredFields:[],optionalFields:[{name:"serviceType",type:"string",description:"Type of service"},{name:"areaServed",type:"string",description:"Service area"},{name:"offers",type:"object",description:"Service pricing"}],placeholder:{},example:{serviceType:"Web Development",areaServed:"Japan"},googleDocsUrl:"https://schema.org/Service"},FAQPage:{type:"FAQPage",label:"FAQ Page",labelJa:"FAQページ",category:"interactive",helpText:"FAQ with expandable Q&A. High visibility in search.",helpTextJa:"Q&A形式のFAQページ。検索結果で高い視認性。",autoFields:[],requiredFields:[{name:"mainEntity",type:"array",description:"Array of Question objects"}],optionalFields:[],placeholder:{mainEntity:[{"@type":"Question",name:"",acceptedAnswer:{"@type":"Answer",text:""}}]},example:{mainEntity:[{"@type":"Question",name:"What is wagtail-herald?",acceptedAnswer:{"@type":"Answer",text:"A comprehensive SEO toolkit for Wagtail CMS."}}]},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/faqpage"},HowTo:{type:"HowTo",label:"How-To",labelJa:"ハウツー",category:"interactive",helpText:"Step-by-step instructions. Shows steps in search results.",helpTextJa:"ステップバイステップの手順。検索結果に手順が表示されます。",autoFields:[{schemaProperty:"name",source:"page.title",description:"How-to title"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"image",source:"page.og_image",description:"Main image"}],requiredFields:[{name:"step",type:"array",description:"Array of HowToStep"}],optionalFields:[{name:"totalTime",type:"string",description:"ISO 8601 duration (e.g., PT30M)"},{name:"estimatedCost",type:"object",description:"MonetaryAmount"},{name:"supply",type:"array",description:"Required supplies"},{name:"tool",type:"array",description:"Required tools"}],placeholder:{step:[{"@type":"HowToStep",name:"",text:""}]},example:{step:[{"@type":"HowToStep",name:"Install",text:"pip install wagtail-herald"},{"@type":"HowToStep",name:"Configure",text:"Add to INSTALLED_APPS"}],totalTime:"PT10M"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/how-to"},Event:{type:"Event",label:"Event",labelJa:"イベント",category:"events",helpText:"Event with date, location, and tickets. Shows in Google Events.",helpTextJa:"日時・場所・チケット情報付きイベント。Googleイベントに表示。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Event name"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"image",source:"page.og_image",description:"Event image"}],requiredFields:[{name:"startDate",type:"datetime",description:"Event start date/time"},{name:"location",type:"object",description:"Place or VirtualLocation"}],optionalFields:[{name:"endDate",type:"datetime",description:"Event end date/time"},{name:"eventStatus",type:"string",description:"EventScheduled, EventCancelled, etc."},{name:"eventAttendanceMode",type:"string",description:"Online, Offline, Mixed"},{name:"offers",type:"object",description:"Ticket information"},{name:"performer",type:"object",description:"Person or Organization"},{name:"organizer",type:"object",description:"Person or Organization"}],placeholder:{startDate:"",location:{"@type":"Place",name:"",address:{"@type":"PostalAddress",streetAddress:"",addressLocality:"",addressCountry:"JP"}}},example:{startDate:"2025-03-15T19:00:00+09:00",endDate:"2025-03-15T21:00:00+09:00",location:{"@type":"Place",name:"Tokyo International Forum",address:{"@type":"PostalAddress",streetAddress:"3-5-1 Marunouchi",addressLocality:"Chiyoda-ku",addressCountry:"JP"}},eventStatus:"https://schema.org/EventScheduled",eventAttendanceMode:"https://schema.org/OfflineEventAttendanceMode"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/event"},Person:{type:"Person",label:"Person",labelJa:"人物",category:"people",helpText:"Person profile. Useful for author pages and team members.",helpTextJa:"人物プロフィール。著者ページやチームメンバーに有用。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Person name"},{schemaProperty:"description",source:"page.search_description",description:"Bio"},{schemaProperty:"image",source:"page.og_image",description:"Photo"}],requiredFields:[],optionalFields:[{name:"jobTitle",type:"string",description:"Job title"},{name:"worksFor",type:"object",description:"Organization"},{name:"email",type:"string",description:"Email address"},{name:"sameAs",type:"array",description:"Social profile URLs"},{name:"alumniOf",type:"object",description:"Educational organization"}],placeholder:{},example:{jobTitle:"Software Engineer",worksFor:{"@type":"Organization",name:"Example Corp"},sameAs:["https://twitter.com/example","https://github.com/example"]},googleDocsUrl:"https://schema.org/Person"},Recipe:{type:"Recipe",label:"Recipe",labelJa:"レシピ",category:"specialized",helpText:"Recipe with ingredients and steps. Shows rich results with image.",helpTextJa:"材料・手順付きレシピ。画像付きリッチリザルトに表示。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Recipe name"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"image",source:"page.og_image",description:"Recipe image"},{schemaProperty:"author",source:"page.owner",description:"Recipe author"},{schemaProperty:"datePublished",source:"page.first_published_at",description:"Publish date"}],requiredFields:[{name:"recipeIngredient",type:"array",description:"List of ingredients"},{name:"recipeInstructions",type:"array",description:"Cooking steps"}],optionalFields:[{name:"prepTime",type:"string",description:"ISO 8601 duration"},{name:"cookTime",type:"string",description:"ISO 8601 duration"},{name:"totalTime",type:"string",description:"ISO 8601 duration"},{name:"recipeYield",type:"string",description:"Number of servings"},{name:"recipeCategory",type:"string",description:"Meal type (e.g., Dinner)"},{name:"recipeCuisine",type:"string",description:"Cuisine type (e.g., Japanese)"},{name:"nutrition",type:"object",description:"NutritionInformation"}],placeholder:{recipeIngredient:[],recipeInstructions:[{"@type":"HowToStep",text:""}]},example:{recipeIngredient:["2 cups flour","1 cup sugar","2 eggs"],recipeInstructions:[{"@type":"HowToStep",text:"Mix dry ingredients"},{"@type":"HowToStep",text:"Add wet ingredients"},{"@type":"HowToStep",text:"Bake at 350°F for 30 minutes"}],prepTime:"PT15M",cookTime:"PT30M",recipeYield:"8 servings",recipeCuisine:"American"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/recipe"},Course:{type:"Course",label:"Course",labelJa:"コース",category:"specialized",helpText:"Educational course. Shows in Google course listings.",helpTextJa:"教育コース。Googleコース一覧に表示。",autoFields:[{schemaProperty:"name",source:"page.title",description:"Course name"},{schemaProperty:"description",source:"page.search_description",description:"Description"},{schemaProperty:"provider",source:"settings.organization",description:"Provider"}],requiredFields:[],optionalFields:[{name:"courseCode",type:"string",description:"Course code/ID"},{name:"hasCourseInstance",type:"array",description:"Course instances with dates"},{name:"educationalLevel",type:"string",description:"Difficulty level"},{name:"offers",type:"object",description:"Pricing information"},{name:"totalHistoricalEnrollment",type:"number",description:"Total enrollments"}],placeholder:{},example:{courseCode:"CS101",educationalLevel:"Beginner",hasCourseInstance:[{"@type":"CourseInstance",courseMode:"Online",startDate:"2025-04-01"}]},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/course"},JobPosting:{type:"JobPosting",label:"Job Posting",labelJa:"求人情報",category:"specialized",helpText:"Job listing. Shows in Google Jobs search.",helpTextJa:"求人情報。Google求人検索に表示。",autoFields:[{schemaProperty:"title",source:"page.title",description:"Job title"},{schemaProperty:"description",source:"page.search_description",description:"Job description"},{schemaProperty:"datePosted",source:"page.first_published_at",description:"Post date"},{schemaProperty:"hiringOrganization",source:"settings.organization",description:"Employer"}],requiredFields:[{name:"jobLocation",type:"object",description:"Place with address"}],optionalFields:[{name:"validThrough",type:"datetime",description:"Application deadline"},{name:"employmentType",type:"string",description:"FULL_TIME, PART_TIME, etc."},{name:"baseSalary",type:"object",description:"MonetaryAmount"},{name:"jobLocationType",type:"string",description:"TELECOMMUTE for remote"},{name:"applicantLocationRequirements",type:"object",description:"Location requirements"}],placeholder:{jobLocation:{"@type":"Place",address:{"@type":"PostalAddress",streetAddress:"",addressLocality:"",addressRegion:"",postalCode:"",addressCountry:"JP"}}},example:{jobLocation:{"@type":"Place",address:{"@type":"PostalAddress",streetAddress:"1-1-1 Shibuya",addressLocality:"Shibuya-ku",addressRegion:"Tokyo",postalCode:"150-0002",addressCountry:"JP"}},employmentType:"FULL_TIME",baseSalary:{"@type":"MonetaryAmount",currency:"JPY",value:{"@type":"QuantitativeValue",minValue:5e6,maxValue:8e6,unitText:"YEAR"}},validThrough:"2025-06-30T23:59:59+09:00"},googleDocsUrl:"https://developers.google.com/search/docs/appearance/structured-data/job-posting"}};function r(){const e={};for(const t of Object.values(o))e[t.category]||(e[t.category]=[]),e[t.category].push(t);return e}const s={"site-wide":{en:"Site-wide",ja:"サイト全体"},content:{en:"Content",ja:"コンテンツ"},business:{en:"Business",ja:"ビジネス"},interactive:{en:"Interactive",ja:"インタラクティブ"},events:{en:"Events",ja:"イベント"},people:{en:"People",ja:"人物"},specialized:{en:"Specialized",ja:"特殊"}},a=["site-wide","content","business","interactive","events","people","specialized"];function n(e,t){const i=t??{types:[],properties:{}},o=function(){if("undefined"==typeof document)return!1;const e=document.documentElement.lang;return(null==e?void 0:e.startsWith("ja"))??!1}();return c(e,i,o),{getState:()=>({types:[...i.types],properties:JSON.parse(JSON.stringify(i.properties))}),setState:t=>{i.types=[...t.types],i.properties=JSON.parse(JSON.stringify(t.properties)),c(e,i,o)},destroy:()=>{e.innerHTML=""}}}function c(e,t,i){e.innerHTML=`\n    <div class="schema-widget">\n      <div class="schema-widget__types">\n        ${function(e,t){const i=r();return a.map(o=>{const r=i[o];if(!r||0===r.length)return"";const a=s[o];return`\n      <fieldset class="schema-widget__category">\n        <legend>${g(t?a.ja:a.en)}</legend>\n        <div class="schema-widget__category-types">\n          ${r.map(i=>{const o=t?i.labelJa:i.label,r=e.includes(i.type),s=!0===i.defaultOn;return`\n              <label class="schema-widget__type${s?" schema-widget__type--default":""}">\n                <input type="checkbox"\n                       name="schema_type"\n                       value="${g(i.type)}"\n                       ${r?"checked":""}>\n                <span class="schema-widget__type-label">${g(o)}</span>\n                ${s?'<span class="schema-widget__type-badge">Auto</span>':""}\n              </label>\n            `}).join("")}\n        </div>\n      </fieldset>\n    `}).join("")}(t.types,i)}\n      </div>\n      <div class="schema-widget__properties">\n        ${p(t,i)}\n      </div>\n    </div>\n  `,function(e,t,i){const o=e.querySelectorAll('input[name="schema_type"]');for(const s of o)s.addEventListener("change",()=>{l(e,t,s,i)});const r=e.querySelectorAll(".schema-widget__json");for(const s of r)s.addEventListener("blur",()=>{d(t,s)})}(e,t,i)}function p(e,t){if(0===e.types.length){return`<div class="schema-widget__empty">${g(t?"スキーマタイプを選択してプロパティを設定してください":"Select schema types above to configure properties")}</div>`}return e.types.map(i=>{const r=o[i];if(!r)return"";const s=e.properties[i]??r.placeholder,a=t?r.labelJa:r.label,n=t?r.helpTextJa:r.helpText,c=t?"自動入力":"Auto-filled",p=t?"例":"Example",l=t?"必須項目":"Required",d=t?"オプション":"Optional",u=r.autoFields.length>0?r.autoFields.map(e=>e.schemaProperty).join(", "):t?"なし":"None";return`\n      <details class="schema-widget__editor" open>\n        <summary class="schema-widget__editor-header">\n          <span class="schema-widget__editor-title">${g(a)}</span>\n          <a href="${g(r.googleDocsUrl)}"\n             target="_blank"\n             rel="noopener noreferrer"\n             class="schema-widget__docs-link"\n             title="View documentation">?</a>\n        </summary>\n        <div class="schema-widget__editor-content">\n          <div class="schema-widget__help">${g(n)}</div>\n\n          <div class="schema-widget__auto-fields">\n            <strong>${g(c)}:</strong> ${g(u)}\n          </div>\n\n          ${function(e,t,i){const o=[];if(e.requiredFields.length>0){const i=e.requiredFields.map(e=>`${e.name} (${e.type})`).join(", ");o.push(`\n      <div class="schema-widget__fields schema-widget__fields--required">\n        <strong>${g(t)}:</strong> ${g(i)}\n      </div>\n    `)}if(e.optionalFields.length>0){const t=e.optionalFields.map(e=>`${e.name} (${e.type})`).join(", ");o.push(`\n      <div class="schema-widget__fields schema-widget__fields--optional">\n        <strong>${g(i)}:</strong> ${g(t)}\n      </div>\n    `)}return o.join("")}(r,l,d)}\n\n          <div class="schema-widget__json-container">\n            <label class="schema-widget__json-label">\n              ${t?"カスタムプロパティ (JSON)":"Custom Properties (JSON)"}\n            </label>\n            <textarea\n              class="schema-widget__json"\n              data-schema-type="${g(i)}"\n              rows="6"\n              spellcheck="false"\n            >${g(JSON.stringify(s,null,2))}</textarea>\n          </div>\n\n          ${Object.keys(r.example).length>0?`\n            <div class="schema-widget__example">\n              <strong>${g(p)}:</strong>\n              <code>${g(JSON.stringify(r.example))}</code>\n            </div>\n          `:""}\n        </div>\n      </details>\n    `}).join("")}function l(e,t,i,r){const s=i.value;if(i.checked){if(!t.types.includes(s)&&(t.types.push(s),!t.properties[s])){const e=o[s];e&&(t.properties[s]={...e.placeholder})}}else{const e=t.types.indexOf(s);e>-1&&t.types.splice(e,1)}const a=e.querySelector(".schema-widget__properties");if(a){a.innerHTML=p(t,r);const e=a.querySelectorAll(".schema-widget__json");for(const i of e)i.addEventListener("blur",()=>{d(t,i)})}}function d(e,t){const i=t.dataset.schemaType;if(i)try{const o=JSON.parse(t.value);e.properties[i]=o,t.classList.remove("schema-widget__json--error")}catch{t.classList.add("schema-widget__json--error")}}function g(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}class BoundSchemaWidget{constructor(e,t,o){i(this,"container"),i(this,"hiddenInput"),i(this,"widget",null),this.container=e,this.hiddenInput=t;try{this.widget=n(e,o),this.setupSync(),this.syncToHiddenInput()}catch(r){console.error("WagtailHerald: Failed to initialize schema widget",r)}}setupSync(){this.container.addEventListener("change",e=>{"INPUT"===e.target.tagName&&this.syncToHiddenInput()}),this.container.addEventListener("blur",e=>{"TEXTAREA"===e.target.tagName&&this.syncToHiddenInput()},!0)}syncToHiddenInput(){var e;const t=null==(e=this.widget)?void 0:e.getState();t&&(this.hiddenInput.value=JSON.stringify(t))}get idForLabel(){return this.hiddenInput.id||null}getValue(){return this.hiddenInput.value}getState(){var e;return(null==(e=this.widget)?void 0:e.getState())??{types:[],properties:{}}}setState(e){var t;null==(t=this.widget)||t.setState(e),this.syncToHiddenInput()}focus(){const e=this.container.querySelector("input");e&&e.focus()}}class SchemaWidgetDefinition{constructor(e){i(this,"html"),this.html=e}render(e,t,i,o){const r=this.html.replace(/__NAME__/g,t).replace(/__ID__/g,i);e.outerHTML=r;const s=document.getElementById(`${i}-container`),a=document.getElementById(i);if(!s||!a)throw new Error(`WagtailHerald: Elements not found for id "${i}"`);let n;if("string"==typeof o)try{n=JSON.parse(o||'{"types":[],"properties":{}}')}catch{n={types:[],properties:{}}}else n=o??{types:[],properties:{}};return new BoundSchemaWidget(s,a,n)}}"undefined"!=typeof window&&window.telepath&&window.telepath.register("wagtail_herald.widgets.SchemaWidget",SchemaWidgetDefinition);const u="0.2.0",m={VERSION:u,initSchemaWidget:n};function h(){const e=document.querySelectorAll("[data-schema-widget]");for(const t of e)t.dataset.schemaWidgetInitialized||(t.dataset.schemaWidgetInitialized="true",n(t))}return"undefined"!=typeof window&&(window.WagtailHeraldSchema=m),"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()),e.SCHEMA_TEMPLATES=o,e.VERSION=u,e.WagtailHeraldSchema=m,e.autoInit=h,e.getAllTypes=function(){return Object.keys(o)},e.getDefaultOnTemplates=function(){return Object.values(o).filter(e=>!0===e.defaultOn)},e.getTemplate=function(e){return o[e]},e.getTemplatesByCategory=r,e.initSchemaWidget=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});
//# sourceMappingURL=schema-widget.iife.js.map
